# Requisitos funcionales

| CÓDIGO  | Nombre                       | Descripción                                                                 | Prioridad | Actor    | Entradas                                                 | Salidas                                          | Precondiciones                                                   | Postcondiciones                                  | Criterios de aceptación                                                                                                                                         | Dependencias |
|---------|------------------------------|-----------------------------------------------------------------------------|-----------|----------|----------------------------------------------------------|--------------------------------------------------|------------------------------------------------------------------|--------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|
| RQF 001 | Registro de usuarios         | Permitir crear una cuenta con email y contraseña; guardar en MongoDB con contraseña encriptada. | Alta      | Usuario  | Email, contraseña (nombre opcional)                      | Usuario creado; token de sesión (JWT) **o** redirección a Login | Usuario no autenticado; email no registrado                      | Usuario persistido; contraseña encriptada        | - No permite emails duplicados.<br>- Valida formato de email y longitud de contraseña.<br>- Responde **201** con ID de usuario o **409** si ya existe.          | RQNF 002, RQNF 003 |
| RQF 002 | Inicio de sesión             | Autenticar credenciales y emitir token de sesión (JWT).                     | Alta      | Usuario  | Email, contraseña                                        | Token JWT; estado autenticado                    | Usuario registrado; contraseña encriptada                         | Sesión activa con token válido                   | - Rechaza credenciales inválidas con **401**.<br>- Devuelve token con expiración definida.<br>- Endpoints protegidos aceptan el token.                           | RQF 001, RQNF 003 |
| RQF 003 | Cierre de sesión             | Finalizar la sesión del usuario.                                            | Media     | Usuario  | Token JWT                                                | Confirmación de cierre                           | Usuario autenticado                                                | Token invalidado/retirado del cliente            | - Tras cerrar sesión, no accede a endpoints protegidos.<br>- Redirige a Login.                                                                                   | RQF 002 |
| RQF 004 | Crear recordatorio           | Permitir crear recordatorios con fecha y hora para envío por email.         | Alta      | Usuario  | Título/medicamento, fecha-hora, mensaje (opcional)       | Recordatorio creado (ID)                         | Usuario autenticado                                                | Recordatorio persistido y programado             | - No permite fechas pasadas.<br>- Responde **201** con ID y fecha programada.<br>- Queda asociado al usuario.                                                   | RQF 002 |
| RQF 005 | Editar recordatorio          | Modificar campos de un recordatorio existente del usuario.                  | Media     | Usuario  | ID de recordatorio; campos a actualizar                  | Recordatorio actualizado                         | Usuario autenticado; recordatorio existe y es del usuario         | Cambios guardados y reprogramados si aplica      | - No permite editar recordatorios de otros usuarios.<br>- Valida nueva fecha-hora (no pasada).<br>- Responde **200** con datos actualizados.                    | RQF 004 |
| RQF 006 | Eliminar recordatorio        | Eliminar un recordatorio del usuario.                                       | Media     | Usuario  | ID de recordatorio                                       | Confirmación de eliminación                      | Usuario autenticado; recordatorio existe y es del usuario         | Recordatorio eliminado                            | - No permite eliminar de otros usuarios.<br>- Responde **200/204**.<br>- El scheduler deja de programarlo.                                                       | RQF 004 |
| RQF 007 | Envío automático por email   | Enviar correos en la fecha-hora programada y registrar el resultado.        | Alta      | Sistema  | Recordatorios programados                                | Email enviado; evento en historial               | Recordatorio existente y programado                                 | Evento de envío registrado (éxito/error)          | - Dispara el envío en la hora configurada (±1 min).<br>- Registra estado (enviado/entregado/error) con timestamp.<br>- Reintentos básicos ante fallos temporales. | RQF 004, RQNF 003 |
| RQF 008 | Visualizar historial         | Listar los envíos de recordatorios del usuario con estado y fecha.          | Alta      | Usuario  | Filtros opcionales                                       | Lista paginada de eventos                        | Usuario autenticado                                                | Historial mostrado                               | - Muestra fecha, estado y título asociado.<br>- Soporta paginación.                                                                                              | RQF 007 |
| RQF 009 | Filtrar por fechas           | Filtrar el historial por rango de fechas.                                   | Media     | Usuario  | Fecha desde, fecha hasta                                 | Lista filtrada                                   | Usuario autenticado; historial existente                           | Resultados acotados al rango                      | - Aplica filtros sin errores de zona horaria.<br>- Responde en **< 2 s** con dataset.                                                                             | RQF 008 |

---

# Requisitos no funcionales

| CÓDIGO   | Categoría                 | Descripción                                                                 | Prioridad | Criterio de verificación / Métrica                                                                                     | Método de prueba                              |
|----------|---------------------------|-----------------------------------------------------------------------------|-----------|-------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
| RQNF 001 | Usabilidad/Responsividad | La interfaz será responsiva y de fácil navegación en desktop y móvil.       | Alta      | - Sin desbordes ni scroll horizontal a ≥360 px.<br>- Controles táctiles ≥44 px.<br>- Navegación completa con teclado.  | Inspección UI + pruebas exploratorias; Lighthouse |
| RQNF 002 | Seguridad (Credenciales) | Las contraseñas estarán encriptadas en la base de datos.                    | Alta      | - Hash con **bcrypt** (cost ≥ 10).<br>- Nunca almacenar en texto plano.                                                 | Revisión de código + consulta directa a BD     |
| RQNF 003 | Seguridad API REST       | JWT para autenticación, validación de datos, CORS y control de errores.     | Alta      | - Endpoints sensibles requieren JWT válido.<br>- Validaciones de entrada con respuestas 4xx adecuadas.<br>- CORS restringido a orígenes permitidos. | Pruebas con Postman + revisión de middleware   |
| RQNF 004 | Rendimiento              | Tiempo de carga aceptable en conexiones promedio.                           | Alta      | - API: **< 800 ms** en operaciones CRUD típicas.<br>- Frontend: **< 2.5 s** en red 10 Mbps.                            | Medición con Postman/JMeter y Lighthouse       |
